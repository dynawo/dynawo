%% Copyright (c) 2015-2020, RTE (http://www.rte-france.com)
%% See AUTHORS.txt
%% All rights reserved.
%% This Source Code Form is subject to the terms of the Mozilla Public
%% License, v. 2.0. If a copy of the MPL was not distributed with this
%% file, you can obtain one at http://mozilla.org/MPL/2.0/.
%% SPDX-License-Identifier: MPL-2.0
%%
%% This file is part of Dynawo, an hybrid C++/Modelica open source suite of simulation tools for power systems.

\documentclass[a4paper, 12pt]{report}

\input{../../../documentation/latex_setup.tex}

\begin{document}

\chapter{Static Var Compensator - Infinite Bus}

The \{Static Var Compensator - Infinite Bus\} test case is a simplified system used to illustrate the behaviour of the Static Var Compensator model present in the \Dynawo library on events such as a voltage reference change or load variation.

\section{Test case description}

The following test case consists of a static var compensator connected to an infinite bus through a line as presented in Figure ~\ref{TestCase}.

\begin{figure}[H]
\centering
\def\factor{0.4}
\begin{tikzpicture}[every node/.style={inner sep=0,outer sep=0}]
% Infinite bus
\path (0,0)  pic[scale=0.4,local bounding box=bus] {infinite bus};
% Generator
\path (8,0) pic[scale=0.2,local bounding box=svarc] {SVarC};
% Line 1
\draw (bus.east) -- (svarc.west);
% Bus inf
\draw (bus.east) ++ (0,0.6) --++ (0,-1.2);
% Bus tfo 2
\draw (svarc.west) ++ (-1,0.6) --++ (0,-1.2);
\end{tikzpicture}
\caption{Static Var Compensator - Infinite Bus system representation}
\label{TestCase}
\end{figure}

\subsection{Initial Conditions}

The static var compensator base voltage is $UNom = 225 kV$. \\

The static var compensator apparent power is $SNom = 100 MVA$.\\

The line parameters in per unit on 100 MVA base are:
\begin{center}
\begin{tabular}{l|l}
   $R = 0 p.u$ & $X = 0.027654 p.u$  \\
\end{tabular}
\end{center}

At $t=0s$, the static var compensator injects 0 MW and 0 Mvar, so its terminal voltage is 1 p.u.

\subsection{Model}

The static var compensator is modeled using a simplified SVarCPV model. Its control has no dynamic.

The static var compensator can be seen as a variable admittance and is thus modelled thanks to the susceptance B.\\

Its injected complex current i is computed thanks to the susceptance B and the complex voltage at its terminal u with the following equation:
\[
\begin{aligned}
& i = j*B*u \\
\end{aligned}
\]

The susceptance B is given by the model.

The susceptance represents the reactive power contribution of the static var compensator. The susceptance computation in per-unit depends on the static var compensator regulation mode:

\begin{itemize}
\item if mode = OFF, $B_{Pu} = 0$. The static var compensator doesn't inject reactive power;
\item if mode = STANDBY, $B_{Pu} = BShunt_{Pu}$.
The static var compensator behaves as a  capacitor;
\item if mode = RUNNING\_V, $B_{Pu} = BVar_{Pu} + BShunt_{Pu}$. The susceptance in per-unit $B_{Pu}$ is composed of a variable susceptance $BVar_{Pu}$ and a fixed susceptance $BShunt_{Pu}$. The fixed susceptance $BShunt_{Pu}$ represents the susceptance in standby mode, and the variable susceptance $BVar_{Pu}$ represents the equivalent variable susceptance generated by the static var compensator power electronics and enabling to control the voltage.
\end{itemize}

The susceptance regulation implements the following regulation law:
\[
\begin{aligned}
& URef_{Pu} = U_{Pu} + Lambda*B_{Pu}*U_{Pu}^2\\
\end{aligned}
\]

The variable susceptance $BVar_{Pu}$ is limited thanks to limitations taking into account static susceptance limits.

\subsection{Scenarios}
The simulated scenarios are :
\begin{itemize}
\item a step on the reference voltage;
\item a small reactive load variation;
\end{itemize}

\newpage
\section{Results}

\subsection{Step on the reference voltage}

The SVC is initially running. A step on URef from 225 kV to 230kV is realised at $t=10s$.

\begin{figure}[H]
\subfigure[Voltage (kV)]
{%
  \begin{tikzpicture}
    \begin{axis}[height = 1.7in]
       \addplot[color=blue!50]
       table[x=time,y expr=\thisrow{Test_svarc_UPu}*225]
       {../SVarC_1_StepUref/reference/outputs/curves/curves.csv};
    \end{axis}
  \end{tikzpicture}
}
\subfigure[Reactive power (MVar)]
{%
  \begin{tikzpicture}
    \begin{axis}[height = 1.7in]
       \addplot[color=blue!50]
       table[x=time,y expr=\thisrow{Test_svarc_QInjPu}*100]
       {../SVarC_1_StepUref/reference/outputs/curves/curves.csv};
    \end{axis}
  \end{tikzpicture}
}
\subfigure[Susceptance (p.u)]
{%
  \begin{tikzpicture}
    \begin{axis}[height = 1.7in]
        \addplot[color=blue!50]
       table[x=time,y expr=\thisrow{Test_svarc_BPu}]
       {../SVarC_1_StepUref/reference/outputs/curves/curves.csv};
    \end{axis}
  \end{tikzpicture}
}
\caption{Step on the reference voltage}
\end{figure}

At $t=10s$, the SVC starts providing reactive power to follow the voltage reference change.

\newpage
\subsection{Reactive load variation}

The SVC is initially in the standby mode. A reactive load variation of Q=150 Mvar is realised at $t=10s$.

\begin{figure}[H]
\subfigure[Voltage (kV)]
{%
  \begin{tikzpicture}
    \begin{axis}[height = 1.7in]
        \addplot[color=blue!50]
       table[x=time,y expr=\thisrow{SVarC_SVarC_UPu}*225]
       {../SVarC_2_LoadVarQ/reference/outputs/curves/curves.csv};
    \end{axis}
  \end{tikzpicture}
}
\subfigure[Reactive power (MVar)]
{%
  \begin{tikzpicture}
    \begin{axis}[height = 1.7in]
        \addplot[color=blue!50]
       table[x=time,y expr=\thisrow{SVarC_SVarC_QInjPu}*100]
       {../SVarC_2_LoadVarQ/reference/outputs/curves/curves.csv};
    \end{axis}
  \end{tikzpicture}
}
\subfigure[Susceptance (p.u)]
{%
  \begin{tikzpicture}
    \begin{axis}[height = 1.7in]
        \addplot[color=blue!50]
       table[x=time,y expr=\thisrow{SVarC_SVarC_BPu}]
       {../SVarC_2_LoadVarQ/reference/outputs/curves/curves.csv};
    \end{axis}
  \end{tikzpicture}
}
\caption{Small reactive load variation}
\end{figure}

At $t=10s$, the voltage suddenly drops due to the load variation and crosses UthresholdDown (218 kV). As a consequence, the SVC switches to running mode and starts providing reactive power to support the voltage.

\end{document}
