<!--
    Copyright (c) 2015-2019, RTE (http://www.rte-france.com)
    See AUTHORS.txt
    All rights reserved.
    This Source Code Form is subject to the terms of the Mozilla Public
    License, v. 2.0. If a copy of the MPL was not distributed with this
    file, you can obtain one at http://mozilla.org/MPL/2.0/.
    SPDX-License-Identifier: MPL-2.0
    This file is part of Dynawo, an hybrid C++/Modelica open source time domain
    simulation tool for power systems.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Dynawo: DYNSolverKINAlgRestoration.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 150px;">
  <td style="padding-left: 0.5em;">
   <div id="projectbrief">Developer documentation for Dynawo
    1.8.0</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('df/d59/a01001_source.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DYNSolverKINAlgRestoration.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../df/d59/a01001.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Copyright (c) 2015-2019, RTE (http://www.rte-france.com)</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// See AUTHORS.txt</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// All rights reserved.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This Source Code Form is subject to the terms of the Mozilla Public</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License, v. 2.0. If a copy of the MPL was not distributed with this</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// file, you can obtain one at http://mozilla.org/MPL/2.0/.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// SPDX-License-Identifier: MPL-2.0</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file is part of Dynawo, an hybrid C++/Modelica open source time domain</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// simulation tool for power systems.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#ifndef SOLVERS_ALGEBRAICSOLVERS_DYNSOLVERKINALGRESTORATION_H_</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#define SOLVERS_ALGEBRAICSOLVERS_DYNSOLVERKINALGRESTORATION_H_</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;boost/core/noncopyable.hpp&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;unordered_set&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;sundials/sundials_nvector.h&gt;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;sundials/sundials_matrix.h&gt;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/dbc/a01004.html">DYNSolverKINCommon.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/def/a00521.html">DYNSparseMatrix.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../de/d9e/a01061.html">DYN</a> {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">class </span>Model;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="../../d7/dee/a03205.html">   41</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d7/dee/a03205.html">SolverKINAlgRestoration</a> : <span class="keyword">public</span> <a class="code" href="../../d1/d86/a03209.html">SolverKINCommon</a>, <span class="keyword">private</span> boost::noncopyable {</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <a class="code" href="../../d7/dee/a03205.html#a065d68ee0391826c1096b233d38251ef">SolverKINAlgRestoration</a>();</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="../../d7/dee/a03205.html#a814100bf78d6e94e753b94daca350739">~SolverKINAlgRestoration</a>();</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="../../d7/dee/a03205.html#a4bf0942b1f7375689c1a69d86ce7b6dd">   57</a></span>&#160;  <span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="../../d7/dee/a03205.html#a4bf0942b1f7375689c1a69d86ce7b6ddae1741c9246fb712f4ee2052fef4a099d">   58</a></span>&#160;    <a class="code" href="../../d7/dee/a03205.html#a4bf0942b1f7375689c1a69d86ce7b6ddae1741c9246fb712f4ee2052fef4a099d">KIN_ALGEBRAIC</a>,  </div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="../../d7/dee/a03205.html#a4bf0942b1f7375689c1a69d86ce7b6dda8b41dc73f7b613015418c561d01440c3">   59</a></span>&#160;    <a class="code" href="../../d7/dee/a03205.html#a4bf0942b1f7375689c1a69d86ce7b6dda8b41dc73f7b613015418c561d01440c3">KIN_DERIVATIVES</a>  </div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  } <a class="code" href="../../d7/dee/a03205.html#a4bf0942b1f7375689c1a69d86ce7b6dd">modeKin_t</a>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keyword">static</span> std::string <a class="code" href="../../d7/dee/a03205.html#abbbe53e8781551d96d93ce2e20e92727">stringFromMode</a>(<a class="code" href="../../d7/dee/a03205.html#a4bf0942b1f7375689c1a69d86ce7b6dd">modeKin_t</a> mode);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d7/dee/a03205.html#a58e7ea33ebfdd5e6a8991af8c145b946">init</a>(<span class="keyword">const</span> std::shared_ptr&lt;Model&gt;&amp; model, <a class="code" href="../../d7/dee/a03205.html#a4bf0942b1f7375689c1a69d86ce7b6dd">modeKin_t</a> mode);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d7/dee/a03205.html#ab9efae067371d26c3b0ad2c3ab3a30a2">setupNewAlgebraicRestoration</a>(<span class="keywordtype">double</span> fnormtol, <span class="keywordtype">double</span> initialaddtol, <span class="keywordtype">double</span> scsteptol, <span class="keywordtype">double</span> mxnewtstep,</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                            <span class="keywordtype">int</span> msbset, <span class="keywordtype">int</span> mxiter, <span class="keywordtype">int</span> printfl);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d7/dee/a03205.html#a5d01a0418956d6d768982ec2cdf922b3">solve</a>(<span class="keywordtype">bool</span> noInitSetup = <span class="keyword">true</span>, <span class="keywordtype">bool</span> evaluateOnlyModeAtFirstIter = <span class="keyword">false</span>);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="../../d7/dee/a03205.html#a0aeb16fe745c1c995a68b9e80205dd0e">  106</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="../../df/d40/a02609.html">Model</a>&amp; <a class="code" href="../../d7/dee/a03205.html#a0aeb16fe745c1c995a68b9e80205dd0e">getModel</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    assert(!(!<a class="code" href="../../d7/dee/a03205.html#aee93dd149899a81b4d99720fb5b5fd1a">model_</a>));</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">return</span> *<a class="code" href="../../d7/dee/a03205.html#aee93dd149899a81b4d99720fb5b5fd1a">model_</a>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  }</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d7/dee/a03205.html#a6df387ba862de9148102ee85e4d367eb">getValues</a>(std::vector&lt;double&gt;&amp; y, std::vector&lt;double&gt;&amp; yp) <span class="keyword">const</span>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d7/dee/a03205.html#a6c21fef993ac98e9de1811bf4b1e2e4a">setInitialValues</a>(<span class="keywordtype">double</span> t, <span class="keyword">const</span> std::vector&lt;double&gt;&amp; y, <span class="keyword">const</span> std::vector&lt;double&gt;&amp; yp);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor">#if _DEBUG_</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordtype">void</span> setCheckJacobian(<span class="keyword">const</span> <span class="keywordtype">bool</span> checkJacobian) {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    checkJacobian_ = checkJacobian;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d7/dee/a03205.html#a57cbaca4925480c9aa934e30b0d27624">resetAlgebraicRestoration</a>();</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dee/a03205.html#a8408527b1f8b63370dff9ae2a9c94ab9">evalF_KIN</a>(N_Vector yy, N_Vector rr, <span class="keywordtype">void</span>* data);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dee/a03205.html#acef4803ccd362ac753d8acab0d308807">evalJ_KIN</a>(N_Vector yy, N_Vector rr,</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;          SUNMatrix JJ, <span class="keywordtype">void</span>* data, N_Vector tmp1, N_Vector tmp2);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dee/a03205.html#a199ee5a1b2586054ec0161444b07741e">evalJPrim_KIN</a>(N_Vector yy, N_Vector rr,</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;          SUNMatrix JJ, <span class="keywordtype">void</span>* data, N_Vector tmp1, N_Vector tmp2);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dee/a03205.html#ac5ed58a1ca3be232aff22a3820b18516">initVarAndEqTypes</a>();</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d7/dee/a03205.html#add73ab0647d3b2be62e0d83ca9b8dbba">updateKINSOLSettings</a>(<span class="keywordtype">double</span> fnormtol, <span class="keywordtype">double</span> initialaddtol, <span class="keywordtype">double</span> scsteptol, <span class="keywordtype">double</span> mxnewtstep,</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                            <span class="keywordtype">int</span> msbset, <span class="keywordtype">int</span> mxiter, <span class="keywordtype">int</span> printfl) <span class="keyword">const</span>;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">#if _DEBUG_</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> checkJacobian(<span class="keyword">const</span> SparseMatrix&amp; smj, Model&amp; model);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="../../d7/dee/a03205.html#a5f7aee2ebad72f4ef1a5aacef5521537">  226</a></span>&#160;  <a class="code" href="../../d7/dee/a03205.html#a4bf0942b1f7375689c1a69d86ce7b6dd">modeKin_t</a> <a class="code" href="../../d7/dee/a03205.html#a5f7aee2ebad72f4ef1a5aacef5521537">getMode</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d7/dee/a03205.html#a4bc4c3840f212a28ec2e5fd2851f19fb">mode_</a>; }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d7/dee/a03205.html#a0f93bad60bee65915af230a6010adde1">cleanAlgebraicVectors</a>();</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="../../d7/dee/a03205.html#aee93dd149899a81b4d99720fb5b5fd1a">  234</a></span>&#160;  std::shared_ptr&lt;Model&gt; <a class="code" href="../../d7/dee/a03205.html#aee93dd149899a81b4d99720fb5b5fd1a">model_</a>;  </div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="../../d7/dee/a03205.html#a3eaef635cba29a338bc2030787953f4e">  236</a></span>&#160;  std::vector&lt;double&gt; <a class="code" href="../../d7/dee/a03205.html#a3eaef635cba29a338bc2030787953f4e">vectorYOrYpSolution_</a>;  </div><div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="../../d7/dee/a03205.html#a188ee09f3ec495908772998c8ee901c5">  237</a></span>&#160;  std::vector&lt;double&gt; <a class="code" href="../../d7/dee/a03205.html#a188ee09f3ec495908772998c8ee901c5">vectorYForRestoration_</a>;  </div><div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="../../d7/dee/a03205.html#aaf2e4939ed6c59711e3210bdc6e50cb7">  238</a></span>&#160;  std::vector&lt;double&gt; <a class="code" href="../../d7/dee/a03205.html#aaf2e4939ed6c59711e3210bdc6e50cb7">vectorYpForRestoration_</a>;  </div><div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="../../d7/dee/a03205.html#aea75fdee0a0aafba11c2150929d51661">  239</a></span>&#160;  std::unordered_set&lt;int&gt; <a class="code" href="../../d7/dee/a03205.html#aea75fdee0a0aafba11c2150929d51661">ignoreF_</a>;  </div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="../../d7/dee/a03205.html#a1a0a6677bdb3bf4b3d8b90857d3df30b">  240</a></span>&#160;  std::unordered_set&lt;int&gt; <a class="code" href="../../d7/dee/a03205.html#a1a0a6677bdb3bf4b3d8b90857d3df30b">ignoreY_</a>;  </div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="../../d7/dee/a03205.html#a2aa393bebb20f745fd7d3b5af90b6272">  241</a></span>&#160;  std::vector&lt;int&gt; <a class="code" href="../../d7/dee/a03205.html#a2aa393bebb20f745fd7d3b5af90b6272">indexF_</a>;  </div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="../../d7/dee/a03205.html#adb2a04b093620de24ccbf00a1ecd99f1">  242</a></span>&#160;  std::vector&lt;int&gt; <a class="code" href="../../d7/dee/a03205.html#adb2a04b093620de24ccbf00a1ecd99f1">indexY_</a>;  </div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="../../d7/dee/a03205.html#a4bc4c3840f212a28ec2e5fd2851f19fb">  243</a></span>&#160;  <a class="code" href="../../d7/dee/a03205.html#a4bf0942b1f7375689c1a69d86ce7b6dd">modeKin_t</a> <a class="code" href="../../d7/dee/a03205.html#a4bc4c3840f212a28ec2e5fd2851f19fb">mode_</a>;  </div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor">#if _DEBUG_</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordtype">bool</span> checkJacobian_;  </div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;};</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}  <span class="comment">// end of namespace DYN</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="preprocessor">#endif  // SOLVERS_ALGEBRAICSOLVERS_DYNSOLVERKINALGRESTORATION_H_</span></div><div class="ttc" id="a03205_html_a4bf0942b1f7375689c1a69d86ce7b6dda8b41dc73f7b613015418c561d01440c3"><div class="ttname"><a href="../../d7/dee/a03205.html#a4bf0942b1f7375689c1a69d86ce7b6dda8b41dc73f7b613015418c561d01440c3">DYN::SolverKINAlgRestoration::KIN_DERIVATIVES</a></div><div class="ttdoc">solve the new value of the derivative of differential variables </div><div class="ttdef"><b>Definition:</b> DYNSolverKINAlgRestoration.h:59</div></div>
<div class="ttc" id="a03205_html_a814100bf78d6e94e753b94daca350739"><div class="ttname"><a href="../../d7/dee/a03205.html#a814100bf78d6e94e753b94daca350739">DYN::SolverKINAlgRestoration::~SolverKINAlgRestoration</a></div><div class="ttdeci">~SolverKINAlgRestoration()</div><div class="ttdoc">destructor </div></div>
<div class="ttc" id="a01004_html"><div class="ttname"><a href="../../df/dbc/a01004.html">DYNSolverKINCommon.h</a></div><div class="ttdoc">Common class for all algebraic solvers based on sundials/KINSOL. </div></div>
<div class="ttc" id="a03205_html_a57cbaca4925480c9aa934e30b0d27624"><div class="ttname"><a href="../../d7/dee/a03205.html#a57cbaca4925480c9aa934e30b0d27624">DYN::SolverKINAlgRestoration::resetAlgebraicRestoration</a></div><div class="ttdeci">void resetAlgebraicRestoration()</div><div class="ttdoc">clean sundials structures to force a new algebraic restoration setup </div></div>
<div class="ttc" id="a03205_html_abbbe53e8781551d96d93ce2e20e92727"><div class="ttname"><a href="../../d7/dee/a03205.html#abbbe53e8781551d96d93ce2e20e92727">DYN::SolverKINAlgRestoration::stringFromMode</a></div><div class="ttdeci">static std::string stringFromMode(modeKin_t mode)</div><div class="ttdoc">get string from mode type </div></div>
<div class="ttc" id="a03205_html_a3eaef635cba29a338bc2030787953f4e"><div class="ttname"><a href="../../d7/dee/a03205.html#a3eaef635cba29a338bc2030787953f4e">DYN::SolverKINAlgRestoration::vectorYOrYpSolution_</a></div><div class="ttdeci">std::vector&lt; double &gt; vectorYOrYpSolution_</div><div class="ttdoc">Solution of the restoration after the call of the solver. </div><div class="ttdef"><b>Definition:</b> DYNSolverKINAlgRestoration.h:236</div></div>
<div class="ttc" id="a03205_html_a5d01a0418956d6d768982ec2cdf922b3"><div class="ttname"><a href="../../d7/dee/a03205.html#a5d01a0418956d6d768982ec2cdf922b3">DYN::SolverKINAlgRestoration::solve</a></div><div class="ttdeci">int solve(bool noInitSetup=true, bool evaluateOnlyModeAtFirstIter=false)</div><div class="ttdoc">solve the equations of F(u) = 0 to find the new value of u </div></div>
<div class="ttc" id="a00521_html"><div class="ttname"><a href="../../d7/def/a00521.html">DYNSparseMatrix.h</a></div><div class="ttdoc">Sparse Matrix class header. </div></div>
<div class="ttc" id="a03205_html_ab9efae067371d26c3b0ad2c3ab3a30a2"><div class="ttname"><a href="../../d7/dee/a03205.html#ab9efae067371d26c3b0ad2c3ab3a30a2">DYN::SolverKINAlgRestoration::setupNewAlgebraicRestoration</a></div><div class="ttdeci">void setupNewAlgebraicRestoration(double fnormtol, double initialaddtol, double scsteptol, double mxnewtstep, int msbset, int mxiter, int printfl)</div><div class="ttdoc">initialize a new algebraic restoration </div></div>
<div class="ttc" id="a03205_html_a188ee09f3ec495908772998c8ee901c5"><div class="ttname"><a href="../../d7/dee/a03205.html#a188ee09f3ec495908772998c8ee901c5">DYN::SolverKINAlgRestoration::vectorYForRestoration_</a></div><div class="ttdeci">std::vector&lt; double &gt; vectorYForRestoration_</div><div class="ttdoc">variables values during call of the solver </div><div class="ttdef"><b>Definition:</b> DYNSolverKINAlgRestoration.h:237</div></div>
<div class="ttc" id="a03205_html_add73ab0647d3b2be62e0d83ca9b8dbba"><div class="ttname"><a href="../../d7/dee/a03205.html#add73ab0647d3b2be62e0d83ca9b8dbba">DYN::SolverKINAlgRestoration::updateKINSOLSettings</a></div><div class="ttdeci">void updateKINSOLSettings(double fnormtol, double initialaddtol, double scsteptol, double mxnewtstep, int msbset, int mxiter, int printfl) const</div><div class="ttdoc">modify the solver settings </div></div>
<div class="ttc" id="a03205_html_a0aeb16fe745c1c995a68b9e80205dd0e"><div class="ttname"><a href="../../d7/dee/a03205.html#a0aeb16fe745c1c995a68b9e80205dd0e">DYN::SolverKINAlgRestoration::getModel</a></div><div class="ttdeci">Model &amp; getModel() const</div><div class="ttdoc">getter for the model currently simulated </div><div class="ttdef"><b>Definition:</b> DYNSolverKINAlgRestoration.h:106</div></div>
<div class="ttc" id="a03209_html"><div class="ttname"><a href="../../d1/d86/a03209.html">DYN::SolverKINCommon</a></div><div class="ttdoc">class SolverKINCommon: common part of all the KINSOL-based solvers Generic class for KINSOL-based sol...</div><div class="ttdef"><b>Definition:</b> DYNSolverKINCommon.h:44</div></div>
<div class="ttc" id="a01061_html"><div class="ttname"><a href="../../de/d9e/a01061.html">DYN</a></div><div class="ttdef"><b>Definition:</b> DYNBitMask.h:17</div></div>
<div class="ttc" id="a03205_html_a58e7ea33ebfdd5e6a8991af8c145b946"><div class="ttname"><a href="../../d7/dee/a03205.html#a58e7ea33ebfdd5e6a8991af8c145b946">DYN::SolverKINAlgRestoration::init</a></div><div class="ttdeci">void init(const std::shared_ptr&lt; Model &gt; &amp;model, modeKin_t mode)</div><div class="ttdoc">initialize the solver </div></div>
<div class="ttc" id="a02609_html"><div class="ttname"><a href="../../df/d40/a02609.html">DYN::Model</a></div><div class="ttdoc">Generic model Generic class for Model. </div><div class="ttdef"><b>Definition:</b> DYNModel.h:54</div></div>
<div class="ttc" id="a03205_html_a6c21fef993ac98e9de1811bf4b1e2e4a"><div class="ttname"><a href="../../d7/dee/a03205.html#a6c21fef993ac98e9de1811bf4b1e2e4a">DYN::SolverKINAlgRestoration::setInitialValues</a></div><div class="ttdeci">void setInitialValues(double t, const std::vector&lt; double &gt; &amp;y, const std::vector&lt; double &gt; &amp;yp)</div><div class="ttdoc">set the initial conditions of the equations to solve </div></div>
<div class="ttc" id="a03205_html"><div class="ttname"><a href="../../d7/dee/a03205.html">DYN::SolverKINAlgRestoration</a></div><div class="ttdoc">class Solver KINSOL for algebraic equations restoration and initialization Generic class for KINSOL s...</div><div class="ttdef"><b>Definition:</b> DYNSolverKINAlgRestoration.h:41</div></div>
<div class="ttc" id="a03205_html_a199ee5a1b2586054ec0161444b07741e"><div class="ttname"><a href="../../d7/dee/a03205.html#a199ee5a1b2586054ec0161444b07741e">DYN::SolverKINAlgRestoration::evalJPrim_KIN</a></div><div class="ttdeci">static int evalJPrim_KIN(N_Vector yy, N_Vector rr, SUNMatrix JJ, void *data, N_Vector tmp1, N_Vector tmp2)</div><div class="ttdoc">calculate the Jacobian associate to F(u):  This method is used in case of resolution of F(u) = 0 for ...</div></div>
<div class="ttc" id="a03205_html_aee93dd149899a81b4d99720fb5b5fd1a"><div class="ttname"><a href="../../d7/dee/a03205.html#aee93dd149899a81b4d99720fb5b5fd1a">DYN::SolverKINAlgRestoration::model_</a></div><div class="ttdeci">std::shared_ptr&lt; Model &gt; model_</div><div class="ttdoc">model currently simulated </div><div class="ttdef"><b>Definition:</b> DYNSolverKINAlgRestoration.h:234</div></div>
<div class="ttc" id="a03205_html_a8408527b1f8b63370dff9ae2a9c94ab9"><div class="ttname"><a href="../../d7/dee/a03205.html#a8408527b1f8b63370dff9ae2a9c94ab9">DYN::SolverKINAlgRestoration::evalF_KIN</a></div><div class="ttdeci">static int evalF_KIN(N_Vector yy, N_Vector rr, void *data)</div><div class="ttdoc">compute F(y) for a given value of y </div></div>
<div class="ttc" id="a03205_html_aaf2e4939ed6c59711e3210bdc6e50cb7"><div class="ttname"><a href="../../d7/dee/a03205.html#aaf2e4939ed6c59711e3210bdc6e50cb7">DYN::SolverKINAlgRestoration::vectorYpForRestoration_</a></div><div class="ttdeci">std::vector&lt; double &gt; vectorYpForRestoration_</div><div class="ttdoc">derivative variables during call of the solver </div><div class="ttdef"><b>Definition:</b> DYNSolverKINAlgRestoration.h:238</div></div>
<div class="ttc" id="a03205_html_a5f7aee2ebad72f4ef1a5aacef5521537"><div class="ttname"><a href="../../d7/dee/a03205.html#a5f7aee2ebad72f4ef1a5aacef5521537">DYN::SolverKINAlgRestoration::getMode</a></div><div class="ttdeci">modeKin_t getMode() const</div><div class="ttdoc">get mode </div><div class="ttdef"><b>Definition:</b> DYNSolverKINAlgRestoration.h:226</div></div>
<div class="ttc" id="a03205_html_adb2a04b093620de24ccbf00a1ecd99f1"><div class="ttname"><a href="../../d7/dee/a03205.html#adb2a04b093620de24ccbf00a1ecd99f1">DYN::SolverKINAlgRestoration::indexY_</a></div><div class="ttdeci">std::vector&lt; int &gt; indexY_</div><div class="ttdoc">variables to keep form the initial set of variables </div><div class="ttdef"><b>Definition:</b> DYNSolverKINAlgRestoration.h:242</div></div>
<div class="ttc" id="a03205_html_a4bc4c3840f212a28ec2e5fd2851f19fb"><div class="ttname"><a href="../../d7/dee/a03205.html#a4bc4c3840f212a28ec2e5fd2851f19fb">DYN::SolverKINAlgRestoration::mode_</a></div><div class="ttdeci">modeKin_t mode_</div><div class="ttdoc">mode of the solver (i.e. algebraic equations or derivative) </div><div class="ttdef"><b>Definition:</b> DYNSolverKINAlgRestoration.h:243</div></div>
<div class="ttc" id="a03205_html_ac5ed58a1ca3be232aff22a3820b18516"><div class="ttname"><a href="../../d7/dee/a03205.html#ac5ed58a1ca3be232aff22a3820b18516">DYN::SolverKINAlgRestoration::initVarAndEqTypes</a></div><div class="ttdeci">unsigned int initVarAndEqTypes()</div><div class="ttdoc">computes and collects the equations and variables&amp;#39; types </div></div>
<div class="ttc" id="a03205_html_aea75fdee0a0aafba11c2150929d51661"><div class="ttname"><a href="../../d7/dee/a03205.html#aea75fdee0a0aafba11c2150929d51661">DYN::SolverKINAlgRestoration::ignoreF_</a></div><div class="ttdeci">std::unordered_set&lt; int &gt; ignoreF_</div><div class="ttdoc">equations to erase from the initial set of equations </div><div class="ttdef"><b>Definition:</b> DYNSolverKINAlgRestoration.h:239</div></div>
<div class="ttc" id="a03205_html_a6df387ba862de9148102ee85e4d367eb"><div class="ttname"><a href="../../d7/dee/a03205.html#a6df387ba862de9148102ee85e4d367eb">DYN::SolverKINAlgRestoration::getValues</a></div><div class="ttdeci">void getValues(std::vector&lt; double &gt; &amp;y, std::vector&lt; double &gt; &amp;yp) const</div><div class="ttdoc">return the new values calculated by the restoration </div></div>
<div class="ttc" id="a03205_html_a4bf0942b1f7375689c1a69d86ce7b6dd"><div class="ttname"><a href="../../d7/dee/a03205.html#a4bf0942b1f7375689c1a69d86ce7b6dd">DYN::SolverKINAlgRestoration::modeKin_t</a></div><div class="ttdeci">modeKin_t</div><div class="ttdoc">define the type of the problem to solve : only algebraic equations or only solve the new value of the...</div><div class="ttdef"><b>Definition:</b> DYNSolverKINAlgRestoration.h:57</div></div>
<div class="ttc" id="a03205_html_acef4803ccd362ac753d8acab0d308807"><div class="ttname"><a href="../../d7/dee/a03205.html#acef4803ccd362ac753d8acab0d308807">DYN::SolverKINAlgRestoration::evalJ_KIN</a></div><div class="ttdeci">static int evalJ_KIN(N_Vector yy, N_Vector rr, SUNMatrix JJ, void *data, N_Vector tmp1, N_Vector tmp2)</div><div class="ttdoc">calculate the Jacobian associate to F(u):  This method is used in case of resolution of F(u) = 0 for ...</div></div>
<div class="ttc" id="a03205_html_a0f93bad60bee65915af230a6010adde1"><div class="ttname"><a href="../../d7/dee/a03205.html#a0f93bad60bee65915af230a6010adde1">DYN::SolverKINAlgRestoration::cleanAlgebraicVectors</a></div><div class="ttdeci">void cleanAlgebraicVectors()</div><div class="ttdoc">clean sundials vectors allocated by this class </div></div>
<div class="ttc" id="a03205_html_a2aa393bebb20f745fd7d3b5af90b6272"><div class="ttname"><a href="../../d7/dee/a03205.html#a2aa393bebb20f745fd7d3b5af90b6272">DYN::SolverKINAlgRestoration::indexF_</a></div><div class="ttdeci">std::vector&lt; int &gt; indexF_</div><div class="ttdoc">equations to keep from the initial set of equations </div><div class="ttdef"><b>Definition:</b> DYNSolverKINAlgRestoration.h:241</div></div>
<div class="ttc" id="a03205_html_a1a0a6677bdb3bf4b3d8b90857d3df30b"><div class="ttname"><a href="../../d7/dee/a03205.html#a1a0a6677bdb3bf4b3d8b90857d3df30b">DYN::SolverKINAlgRestoration::ignoreY_</a></div><div class="ttdeci">std::unordered_set&lt; int &gt; ignoreY_</div><div class="ttdoc">variables to erase form the initial set of variables </div><div class="ttdef"><b>Definition:</b> DYNSolverKINAlgRestoration.h:240</div></div>
<div class="ttc" id="a03205_html_a065d68ee0391826c1096b233d38251ef"><div class="ttname"><a href="../../d7/dee/a03205.html#a065d68ee0391826c1096b233d38251ef">DYN::SolverKINAlgRestoration::SolverKINAlgRestoration</a></div><div class="ttdeci">SolverKINAlgRestoration()</div><div class="ttdoc">default constructor </div></div>
<div class="ttc" id="a03205_html_a4bf0942b1f7375689c1a69d86ce7b6ddae1741c9246fb712f4ee2052fef4a099d"><div class="ttname"><a href="../../d7/dee/a03205.html#a4bf0942b1f7375689c1a69d86ce7b6ddae1741c9246fb712f4ee2052fef4a099d">DYN::SolverKINAlgRestoration::KIN_ALGEBRAIC</a></div><div class="ttdoc">solve only algebraic equations </div><div class="ttdef"><b>Definition:</b> DYNSolverKINAlgRestoration.h:58</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!--
    Copyright (c) 2015-2019, RTE (http://www.rte-france.com)
    See AUTHORS.txt
    All rights reserved.
    This Source Code Form is subject to the terms of the Mozilla Public
    License, v. 2.0. If a copy of the MPL was not distributed with this
    file, you can obtain one at http://mozilla.org/MPL/2.0/.
    SPDX-License-Identifier: MPL-2.0
    This file is part of Dynawo, an hybrid C++/Modelica open source time domain
    simulation tool for power systems.
-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_1784a59e55c9933a90efd2d239600c8f.html">dynawo</a></li><li class="navelem"><a class="el" href="../../dir_22a316840cfeae933077e8f7330b01fd.html">sources</a></li><li class="navelem"><a class="el" href="../../dir_a769528b188158bb44ac136b67c42939.html">Solvers</a></li><li class="navelem"><a class="el" href="../../dir_d00bb33c142b7149cd0b208ba1e7d1c9.html">AlgebraicSolvers</a></li><li class="navelem"><a class="el" href="../../df/d59/a01001.html">DYNSolverKINAlgRestoration.h</a></li>
    <li class="footer">Generated on Fri Jul 11 2025 13:26:14 for Dynawo by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
